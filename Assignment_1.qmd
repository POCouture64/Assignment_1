---
title: "Assignment_1"
author: "Pierre-Olivier Couture"
format: html
editor: visual
---

## Comment

This is all my code and explanation for Assignment 1 in PSYR 6003 Fundamental of Applied Stats (Winter).

## Question 1: Install all required packages and load in the data set

```{r}
#| label: Installing and loading in all packages
# This is the code for installing all the libraries I require for this code and then once it is installed, I call it back (make sure R knows to use it) 

installed.packages("tidyverse")
install.packages("pwr")
library(tidyverse)
library(readr)
library(haven)
library(pwr)

```

```{r}
#| label: Load in the Data
# This is the code for loading in the "avengers.csv' file from GitHub to my RStudio. 

avengers <- read_csv("avengers.csv")

```

## Question 2: Creating a new variable called 'CombatEffectiveness'

```{r}
#| label: Creating CombatEffectiveness
# This is the code I used for to sum the columns of speed, agility, strength
# and willpower into a new variable called 'CombatEffectiveness.' While doing 
# this I will also only include complete, clean cases and not count incomplete
# responses. Directly below it I will print the results to make sure the code 
# worked correctly.

avengers <- avengers %>%
  mutate(CombatEffectiveness = rowSums(across(c(speed, agility, strength, willpower)), na.rm = TRUE))

print(avengers)

```

## Question 3a) Making an SPSS copy

```{r}
#| label: SPSS copy
# This is the code I used to make a copy of the dataset in an SPSS format but it
# will only include the avengers who did not have a superpower and have died. 

avengers_SPSS <- avengers %>%
  filter(superpower == "no", died == "yes")

# The following code will save the code for to an SPSS format

write_sav(avengers_SPSS, "avengers_no_super_dead.SPSS")

```

## Question 3b) Making a csv copy

```{r}
#| label: CSV copy
# This is the code I used to make a copy of the dataset in a CSV format but it
# will only include the avengers who did not have a superpower and have died.

avengers_CSV <- avengers %>%
  filter(superpower == "no", died == "yes")

# The following code will save the code for to a CSV format

write_csv(avengers_CSV, "avengers_no_super_dead.csv")

```

## Question 3c) Summarize the dataset

```{r}
#| label: Summarizing the data for Combat Effectiveness

# This is the code I will use to understand the properties of combat 
# effectiveness, kills, and injuries. This will present the mean, sd,  # and range values for those variables.

# This is the code for 'CombatEffectiveness' 
summarise(avengers,avg_CE = mean(CombatEffectiveness,na.rm=TRUE))
summarise(avengers,sd_CE = sd(CombatEffectiveness,na.rm=TRUE))
range(avengers$CombatEffectiveness, na.rm = TRUE)
```

```{r}
#| label: Summarizing the data for kills

# This is the code for 'kills'
summarise(avengers,avg_kills = mean(kills,na.rm=TRUE))
summarise(avengers,sd_kills = sd(kills,na.rm=TRUE))
range(avengers$kills, na.rm = TRUE)
```

```{r}
#| label: Summarizing the data for injuries

# This is the code for 'injuries'
summarise(avengers,avg_injuries = mean(injuries,na.rm=TRUE))
summarise(avengers,sd_injuries = sd(injuries,na.rm=TRUE))
range(avengers$injuries, na.rm = TRUE)
```

## Question 3d) Dividing the North and South 

```{r}
#| label:  Mean/sd and range for North
# Here is the code I used to separate the data into those from the North and
# South battlefield. 

north_stats <- avengers_CSV %>%
  filter(north_south == "north") %>%
  summarise(
    mean_CombatEffectiveness = mean(CombatEffectiveness, na.rm = TRUE),
    sd_CombatEffectiveness = sd(CombatEffectiveness, na.rm = TRUE),
    min_CombatEffectiveness = min(CombatEffectiveness, na.rm = TRUE),
    max_CombatEffectiveness = max(CombatEffectiveness, na.rm = TRUE),
    
    mean_injuries = mean(injuries, na.rm = TRUE),
    sd_injuries = sd(injuries, na.rm = TRUE),
    min_injuries = min(injuries, na.rm = TRUE),
    max_injuries = max(injuries, na.rm = TRUE),
    
    mean_kills = mean(kills, na.rm = TRUE),
    sd_kills = sd(kills, na.rm = TRUE),
    min_kills = min(kills, na.rm = TRUE),
    max_kills = max(kills, na.rm = TRUE)
  )

print(north_stats)

```

```{r}
#| label:  Mean/sd and range for South
# Here is the code I used to separate the data into those from the North and
# South battlefield. 

south_stats <- avengers_CSV %>%
  filter(north_south == "south") %>%
  summarise(
    mean_CombatEffectiveness = mean(CombatEffectiveness, na.rm = TRUE),
    sd_CombatEffectiveness = sd(CombatEffectiveness, na.rm = TRUE),
    min_CombatEffectiveness = min(CombatEffectiveness, na.rm = TRUE),
    max_CombatEffectiveness = max(CombatEffectiveness, na.rm = TRUE),
    
    mean_injuries = mean(injuries, na.rm = TRUE),
    sd_injuries = sd(injuries, na.rm = TRUE),
    min_injuries = min(injuries, na.rm = TRUE),
    max_injuries = max(injuries, na.rm = TRUE),
    
    mean_kills = mean(kills, na.rm = TRUE),
    sd_kills = sd(kills, na.rm = TRUE),
    min_kills = min(kills, na.rm = TRUE),
    max_kills = max(kills, na.rm = TRUE)
  )

print(south_stats)

```

## Question 4) Efficacy and Kills

```{r}
#| label: Most effective battle field and most kills
#| eval: false
#| include: false
# This section will not run any code but is instead used to help me keep track 
# of my code better and I include the summary stats that I have calculated above 
# to make it easier for me to reference back to later when writing my report.

#########
##### NORTH STATS
#########
# mean_CombatEffectiveness = 499.7815
# sd_CombatEffectiveness = 174.0656
# min_CombatEffectiveness = 130.68
# max_CombatEffectiveness = 897.06

# mean_injuries = 4.60274
# sd_injuries = 0.6819035
# min_injuries = 2
# max_injuries = 5

# mean_kills = 1.712329
# sd_kills = 4.565813
# min_kills = 0
# max_kills = 34

#########
##### SOUTH STATS
#########
# mean_CombatEffectiveness = 491.6771
# sd_CombatEffectiveness = 189.5299
# min_CombatEffectiveness = 67.25
# max_CombatEffectiveness = 946.89

# mean_injuries = 4.428571
# sd_injuries = 0.8789123
# min_injuries = 2
# max_injuries = 5

# mean_kills = 4.75
# sd_kills = 14.9929
# min_kills = 0
# max_kills = 79

```

## Question 5) Most erroneous variables

```{r}
#| label: Most erroneous variable between combat effectiveness, kills, and injuries
# Same thing as Q4, this will not run code and will allow me to compare the 
# stats from the 3 variables. I will use the sd to determine how erroneous the 
# variables are as well as the range of values. This will not look at north vs
# south and will use it based on the total sample calculation made in Q3c.

############## STATS
#### CE
# avg = 982.1511
# sd = 10,494.71
# min / max = 67.25 / 300,000

#### Kills
# avg = 3.833744
# sd = 10.78843
# min / max = 0 / 176

#### Injuries
# avg = 3.488916
# sd = 1.262618
# min / max = 0 / 5

```

## Question 6) Secondary Analysis

```{r}
#| label: Justification for Required Sample
# The question requires me to provide two justifications for how you might 
# estimate the required sample for this study before you analyze the data. 
# Explain briefly your choice

## Here are the options I could chose from:

# Measure the entire population: A researcher can specify the entire population, it is finite, and it is possible to measure (almost) every entity in the population.

# Resource constraints: Limited resources are the primary reason for the choice of the sample size a researcher can collect.

# Accuracy: The research question focuses on the size of a parameter, and a researcher collects sufficient data to have an estimate with a desired level of accuracy.

# A-priori power analysis: The research question aims to test whether certain effect sizes can be statistically rejected with a desired statistical power.

# Heuristics: A researcher decides upon the sample size based on a heuristic, general rule or norm that is described in the literature or communicated orally.

# No justification: A researcher has no reason to choose a specific sample size or does not have a clearly specified inferential goal and wants to communicate this honestly.

```

## Question 7) Choosing Effect Size

```{r}
#| label: Hypothetical Effect Size 
# Choose a hypothetical effect size that you might be looking for here. The exact size of the effect does not matter (you can decide and state it), but you must justify how you might choose that estimated effect size if this were a real study 
# Chose something that is reasonable. I will look for a small effect size Cohen's d= .2

```

## Question 8) Power Analysis

```{r}
#| label: Power Analysis
# Here is the code I will use for the power analysis

# The code to find what size effect I was to see and it will provide me with the appropriate d value. in my case, d = .2. 
cohen.ES(test = "t", size = "small") 

# The code to perform the power analysis 
# I chose the small effect size because I would be happy to find any effect. The significance level of .5 was used because that is what most studies in psychology use. I made the power .9 because it is recommended in psychological research
pwr.t.test(d=.2, sig.level = .5, power = .9)

```










